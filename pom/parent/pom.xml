<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 2009 The Kuali Foundation Licensed under the Educational Community
  License, Version 2.0 (the "License"); you may not use this file except in
  compliance with the License. You may obtain a copy of the License at
  http://www.osedu.org/licenses/ECL-2.0 Unless required by applicable law or
  agreed to in writing, software distributed under the License is distributed
  on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
  express or implied. See the License for the specific language governing
  permissions and limitations under the License.
-->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <!--
    Shared parent. Contains settings common to all projects at Kuali. This
    includes a standard release profile that all projects should use when
    producing released artifacts. Standard versions of plugins are also defined
    but may be overridden/configured by individual projects as needed
  -->
  <groupId>org.kuali</groupId>
  <artifactId>kuali-parent</artifactId>
  <version>80-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>The Kuali Foundation</name>
  <description>
    Kuali is a community of universities, colleges, businesses, and other
    organizations that have partnered to build and sustain open-source administrative software for
    higher education, by higher
    education. Kuali software is designed to meet the needs of all sizes of institutions, from land-grant research
    universities to community colleges. The
    members of the Kuali Community share a common vision of open, modular, and
    distributed systems for their software requirements. Kuali software is released under the Educational
    Community License
  </description>
  <licenses>
    <license>
      <name>Educational Community License, Version 2.0</name>
      <url>${kuali.ecl.license.url}</url>
      <distribution>repo</distribution>
    </license>
  </licenses>
  <organization>
    <name>The Kuali Foundation</name>
    <url>http://www.kuali.org/</url>
  </organization>
  <inceptionYear>2004</inceptionYear>
  <developers>
    <developer>
      <id>kuali</id>
      <organization>Kuali Foundation</organization>
      <organizationUrl>http://www.kuali.org</organizationUrl>
    </developer>
  </developers>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <kuali.compile.source>1.6</kuali.compile.source>
    <kuali.compile.target>1.6</kuali.compile.target>
    <kuali.release.use.maven.default.profile>false</kuali.release.use.maven.default.profile>
    <kuali.release.goals>deploy</kuali.release.goals>
    <kuali.release.dryrun>false</kuali.release.dryrun>
    <kuali.release.arguments>-Pkuali-release</kuali.release.arguments>
    <kuali.release.username />
    <kuali.release.password />

    <kuali.ecl.license.url>http://maven.kuali.org/external/org/opensource/ecl/2.0/ecl-2.0.txt</kuali.ecl.license.url>

    <!-- This must be the same as the groupId for this pom -->
    <kuali.organization.group.id>org.kuali</kuali.organization.group.id>

    <kuali.repository.release.id>kuali.release</kuali.repository.release.id>
    <kuali.repository.release.name>Kuali Release Repository</kuali.repository.release.name>
    <kuali.repository.release.url>s3://maven.kuali.org/release</kuali.repository.release.url>

    <kuali.repository.snapshot.id>kuali.snapshot</kuali.repository.snapshot.id>
    <kuali.repository.snapshot.name>Kuali Snapshot Repository</kuali.repository.snapshot.name>
    <kuali.repository.snapshot.url>s3://maven.kuali.org/snapshot</kuali.repository.snapshot.url>
  </properties>
  <repositories>
    <repository>
      <id>kuali.nexus</id>
      <name>Nexus Repository Manager</name>
      <url>http://nexus.kuali.org/content/groups/public</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <id>kuali.nexus</id>
      <name>Nexus Repository Manager</name>
      <url>http://nexus.kuali.org/content/groups/public</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </pluginRepository>
  </pluginRepositories>
  <!-- The public url is filled in by the maven-kualisite-plugin -->
  <url>${kuali.site.public.url}</url>
  <distributionManagement>
    <!-- The download url is filled in by the maven-kualisite-plugin -->
    <downloadUrl>${kuali.site.download.url}</downloadUrl>
    <site>
      <id>${kuali.site.server.id}</id>
      <name>Maven Site</name>
      <!-- The site publication url is filled in by the maven-kualisite-plugin -->
      <url>${kuali.site.publish.url}</url>
    </site>
    <repository>
      <id>${kuali.repository.release.id}</id>
      <name>${kuali.repository.release.name}</name>
      <url>${kuali.repository.release.url}</url>
    </repository>
    <snapshotRepository>
      <id>${kuali.repository.snapshot.id}</id>
      <name>${kuali.repository.snapshot.name}</name>
      <url>${kuali.repository.snapshot.url}</url>
    </snapshotRepository>
  </distributionManagement>
  <scm>
    <connection>scm:svn:https://test.kuali.org/svn/student/deploymentlab/trunk/pom</connection>
    <developerConnection>scm:svn:https://test.kuali.org/svn/student/deploymentlab/trunk/pom</developerConnection>
    <url>https://test.kuali.org/svn/student/deploymentlab/trunk/pom</url>
  </scm>
  <build>
    <extensions>
      <extension>
        <groupId>org.kuali.maven.wagons</groupId>
        <artifactId>maven-s3-wagon</artifactId>
        <version>1.0.28</version>
      </extension>
    </extensions>
    <pluginManagement>
      <plugins>
        <!-- set versions of common plugins for reproducibility, ordered alphabetically -->
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-clean-plugin</artifactId>
          <version>2.4</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>2.3.2</version>
          <configuration>
            <source>${kuali.compile.source}</source>
            <target>${kuali.compile.target}</target>
            <encoding>${project.build.sourceEncoding}</encoding>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.5</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-gpg-plugin</artifactId>
          <version>1.2</version>
          <configuration>
            <passphrase>${kuali.gpg.passphrase}</passphrase>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.3.1</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-jar-plugin</artifactId>
          <version>2.3</version>
          <configuration>
            <archive>
              <manifestEntries>
                <Bundle-Version>${project.version}</Bundle-Version>
                <Bundle-Name>${project.name}</Bundle-Name>
                <Bundle-Description>${project.description}</Bundle-Description>
                <Bundle-License>${kuali.ecl.license.url}</Bundle-License>
                <Bundle-Vendor>${project.organization.name}</Bundle-Vendor>
                <Bundle-DocURL>${project.organization.url}</Bundle-DocURL>
                <Bundle-Timestamp>${maven.build.timestamp}</Bundle-Timestamp>
                <Bundle-SymbolicName>${project.groupId}.${project.artifactId}</Bundle-SymbolicName>
                <Bundle-BuildNumber>${env.BUILD_NUMBER}</Bundle-BuildNumber>
                <SVN-Repository>${svn.repository}</SVN-Repository>
                <SVN-Path>${svn.path}</SVN-Path>
                <SVN-Revision>${svn.revision}</SVN-Revision>
              </manifestEntries>
              <manifest>
                <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
              </manifest>
            </archive>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-javadoc-plugin</artifactId>
          <version>2.7</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-release-plugin</artifactId>
          <version>2.1</version>
          <configuration>
            <goals>${kuali.release.goals}</goals>
            <dryRun>${kuali.release.dryrun}</dryRun>
            <arguments>${kuali.release.arguments}</arguments>
            <useReleaseProfile>${kuali.release.use.maven.default.profile}</useReleaseProfile>
            <developmentVersion>${kuali.development.version}</developmentVersion>
            <releaseVersion>${kuali.release.version}</releaseVersion>
            <username>${kuali.release.username}</username>
            <password>${kuali.release.password}</password>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-resources-plugin</artifactId>
          <version>2.5</version>
          <configuration>
            <encoding>${project.build.sourceEncoding}</encoding>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-source-plugin</artifactId>
          <version>2.1.1</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.8</version>
        </plugin>
        <plugin>
          <groupId>com.google.code.maven-svn-revision-number-plugin</groupId>
          <artifactId>maven-svn-revision-number-plugin</artifactId>
          <version>1.6</version>
          <configuration>
            <entries>
              <entry>
                <prefix>svn</prefix>
              </entry>
            </entries>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-war-plugin</artifactId>
          <version>${kuali.war.plugin.version}</version>
          <configuration>
            <archive>
              <manifestEntries>
                <Bundle-Version>${project.version}</Bundle-Version>
                <Bundle-Name>${project.name}</Bundle-Name>
                <Bundle-Description>${project.description}</Bundle-Description>
                <Bundle-License>${kuali.ecl.license.url}</Bundle-License>
                <Bundle-Vendor>${project.organization.name}</Bundle-Vendor>
                <Bundle-DocURL>${project.organization.url}</Bundle-DocURL>
                <Bundle-Timestamp>${maven.build.timestamp}</Bundle-Timestamp>
                <Bundle-SymbolicName>${project.groupId}.${project.artifactId}</Bundle-SymbolicName>
                <Bundle-BuildNumber>${env.BUILD_NUMBER}</Bundle-BuildNumber>
                <SVN-Revision>${svn.revision}</SVN-Revision>
                <SVN-Path>${svn.path}</SVN-Path>
                <SVN-Repository>${svn.repository}</SVN-Repository>
              </manifestEntries>
            </archive>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.sonatype.plugins</groupId>
          <artifactId>nexus-maven-plugin</artifactId>
          <version>1.6</version>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
  <profiles>
    <profile>
      <id>sonatype-oss-release</id>
      <properties>
        <kuali.nexus.sonatype.url>https://oss.sonatype.org</kuali.nexus.sonatype.url>
        <kuali.nexus.sonatype.description>Releasing version ${project.version} of ${project.artifactId}</kuali.nexus.sonatype.description>
        <kuali.nexus.sonatype.phase>deploy</kuali.nexus.sonatype.phase>
        <kuali.nexus.sonatype.automatic>true</kuali.nexus.sonatype.automatic>
        <kuali.nexus.sonatype.promote.auto.select.override>true</kuali.nexus.sonatype.promote.auto.select.override>
        <kuali.nexus.sonatype.release.repository.id>releases</kuali.nexus.sonatype.release.repository.id>

        <kuali.repository.release.id>sonatype-nexus-staging</kuali.repository.release.id>
        <kuali.repository.release.name>Sonatype Nexus Release Repository</kuali.repository.release.name>
        <kuali.repository.release.url>${kuali.nexus.sonatype.url}/service/local/staging/deploy/maven2/</kuali.repository.release.url>

        <!-- These are for reference only.  Not currently publishing snapshots to Sonatype's Nexus instance 
        <kuali.repository.snapshot.id>sonatype-nexus-snapshots</kuali.repository.snapshot.id>
        <kuali.repository.snapshot.name>Sonatype Nexus Snapshots</kuali.repository.snapshot.name>
        <kuali.repository.snapshot.url>https://oss.sonatype.org/content/repositories/snapshots/</kuali.repository.snapshot.url>
        -->
      </properties>
      <build>
        <plugins>
          <plugin>
            <groupId>org.sonatype.plugins</groupId>
            <artifactId>nexus-maven-plugin</artifactId>
            <configuration>
              <nexusUrl>${kuali.nexus.sonatype.url}</nexusUrl>
              <serverAuthId>${kuali.repository.release.id}</serverAuthId>
              <automatic>${kuali.nexus.sonatype.automatic}</automatic>
              <promoteAutoSelectOverride>${kuali.nexus.sonatype.promote.auto.select.override}
              </promoteAutoSelectOverride>
              <description>${kuali.nexus.sonatype.description}</description>
              <targetRepositoryId>${kuali.nexus.sonatype.release.repository.id}</targetRepositoryId>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
    <profile>
      <id>kuali-release</id>
      <build>
        <plugins>
          <plugin>
            <inherited>true</inherited>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-deploy-plugin</artifactId>
            <configuration>
              <updateReleaseInfo>true</updateReleaseInfo>
            </configuration>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-gpg-plugin</artifactId>
            <configuration>
              <passphrase>${kuali.gpg.passphrase}</passphrase>
            </configuration>
            <executions>
              <execution>
                <id>sign-artifacts</id>
                <phase>verify</phase>
                <goals>
                  <goal>sign</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <configuration>
              <encoding>${project.build.sourceEncoding}</encoding>
            </configuration>
            <executions>
              <execution>
                <id>attach-javadocs</id>
                <goals>
                  <goal>jar</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-source-plugin</artifactId>
            <executions>
              <execution>
                <id>attach-sources</id>
                <phase>package</phase>
                <goals>
                  <goal>jar-no-fork</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-site-plugin</artifactId>
            <executions>
              <execution>
                <id>attach-descriptor</id>
                <phase>install</phase>
                <goals>
                  <goal>attach-descriptor</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
          <plugin>
            <groupId>com.google.code.maven-svn-revision-number-plugin</groupId>
            <artifactId>maven-svn-revision-number-plugin</artifactId>
            <executions>
              <execution>
                <id>svn-info</id>
                <goals>
                  <goal>revision</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
</project>