<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.kuali.pom</groupId>
        <artifactId>kuali-common</artifactId>
        <version>2.1.50</version>
    </parent>
    <groupId>org.kuali.student</groupId>
    <artifactId>student</artifactId>
    <version>2.0.0-spring-db-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>Kuali Student</name>
    <modules>
        <module>ks-core</module>
        <module>ks-lum</module>
        <module>ks-enroll</module>
        <module>ks-deployments</module>
    </modules>
    <properties>
        <oracle.dba.username>SYS AS SYSDBA</oracle.dba.username>
        <oracle.dba.password></oracle.dba.password>
        <mysql.dba.username>root</mysql.dba.username>
        <mysql.dba.password></mysql.dba.password>
        <oracle.version>11.2.0.2</oracle.version>
        <oracle.artifactId>ojdbc6_g</oracle.artifactId>
        <mysql.version>5.1.18</mysql.version>
        <kuali.rice.version>2.2.0</kuali.rice.version>
        <ks.core.version>2.0.0-spring-db-SNAPSHOT</ks.core.version>
        <ks.enroll.version>1.0.0-spring-db-SNAPSHOT</ks.enroll.version>
        <ks.lum.version>2.0.0-spring-db-SNAPSHOT</ks.lum.version>
        <ks.deployments.version>2.0.0-spring-db-SNAPSHOT</ks.deployments.version>

        <!-- default  -->
        <plugin.spring.context.db>classpath:org/kuali/common/deploy/spring/db-developer-context.xml</plugin.spring.context.db>

        <!-- Properties for the meta-inf plugin to create lists of sql file locations -->
        <metainf.schema>**/initial-db/**/ks-*create-schema.sql</metainf.schema>
        <metainf.data>**/initial-db/**/data/*.sql</metainf.data>
        <metainf.constraints>**/initial-db/**/ks-*constraints.sql</metainf.constraints>

        <!-- Meta inf base output -->
        <metainf.output>${project.build.outputDirectory}/META-INF/sql/${db.vendor}/${project.artifactId}</metainf.output>
    </properties>
    <profiles>
        <!-- Properties used by the spring-maven plugin to validate that the sql within a module, such as ks-enroll-sql -->
        <profile>
            <id>db</id>
            <properties>
                <jdbc.username>VALIDATE_DB</jdbc.username>
                <sql.rice.baseline>rice-impex-server-bootstrap</sql.rice.baseline>
                <sql.meta.rice>classpath:META-INF/sql/${db.vendor}/ks-rice-sql</sql.meta.rice>
                <sql.meta.project>classpath:META-INF/sql/${db.vendor}/${project.artifactId}</sql.meta.project>

                <!-- SQL resources -->
                <sql.schema.1>classpath:sql/oracle/${sql.rice.baseline}.sql</sql.schema.1>
                <sql.schema.2.list>${sql.meta.rice}-schema.resources</sql.schema.2.list>
                <sql.schema.3.list>${sql.meta.project}-schema.resources</sql.schema.3.list>

                <sql.data.1.list>${sql.rice.baseline}-data.resources</sql.data.1.list>
                <sql.data.2.list>${sql.meta.rice}-data.resources</sql.data.2.list>
                <sql.data.3.list>${sql.meta.project}-data.resources</sql.data.3.list>

                <sql.constraints.1>classpath:sql/oracle/${sql.rice.baseline}-constraints.sql</sql.constraints.1>
                <sql.constraints.2.list>${sql.meta.rice}-constraints.resources</sql.constraints.2.list>
                <sql.constraints.3.list>${sql.meta.project}-constraints.resources</sql.constraints.3.list>

                <!-- upgrade folders run last -->
                <sql.constraints.4.list>${sql.meta.rice}-upgrades.resources</sql.constraints.4.list>
                <sql.constraints.5.list>${sql.meta.project}-upgrades.resources</sql.constraints.5.list>

                <sql.schema.sequential>sql.schema.1,sql.schema.2.list,sql.schema.3.list</sql.schema.sequential>

                <sql.data.concurrent>sql.data.2.list,sql.data.3.list</sql.data.concurrent>
                <sql.data.sequential>sql.data.1.list</sql.data.sequential>
                <sql.data.order>sequential,concurrent</sql.data.order>

                <sql.constraints.concurrent>sql.constraints.2.list,sql.constraints.3.list</sql.constraints.concurrent>
                <sql.constraints.sequential>sql.constraints.1,sql.constraints.4.list,sql.constraints.5.list</sql.constraints.sequential>
                <sql.constraints.order>concurrent,sequential</sql.constraints.order>
            </properties>
        </profile>
    </profiles>
</project>
