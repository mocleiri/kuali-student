<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">


    <!-- Breadcrumbs and History -->
    <bean id="Uif-KsaBreadcrumbs" parent="Uif-Breadcrumbs">
        <!--property name="homewardPathList">
            <list>
                <bean parent="Uif-HistoryEntry" p:title="Home" p:url="../index.html"/>
            </list>
        </property-->
    </bean>

    <bean id="Uif-KsaTheme" parent="GlobalTheme">
        <!-- Additional CSS and JS files can be added here -->
    </bean>

    <bean id="Uif-KsaNavigationGroupBase" class="com.sigmasys.kuali.ksa.krad.uif.LinkNavigationGroup" abstract="true">
        <property name="template" value="/WEB-INF/ftl/navigationGroup.ftl"/>
        <property name="templateName" value="uif_ksa_navigationGroup"/>
        <property name="cssClasses">
            <list>
                <value>uif-navigationGroup</value>
            </list>
        </property>
    </bean>

    <bean id="Uif-KsaViewNavigation" parent="Uif-KsaNavigationGroupBase" scope="prototype">
        <property name="navigationType" value="TAB_MENU"/>
        <property name="cssClasses">
            <list merge="true">
                <value>uif-tabNavigationGroup</value>
            </list>
        </property>
        <property name="items">
            <list>
                <bean id="accountsTab" parent="Uif-Link" p:linkText="Accounts" p:href="searchView?methodToCall=get&amp;viewId=SearchView">
                    <property name="componentSecurity.viewAuthz" value="true"/>
                </bean>
                <bean id="administrationTab" parent="Uif-Link" p:linkText="Administration" p:href="adminView?methodToCall=get&amp;viewId=AdminView&amp;pageId=AccountManagement">
                    <property name="componentSecurity.viewAuthz" value="true"/>
                </bean>
                <bean id="reportingTab" parent="Uif-Link" p:linkText="Reporting &amp; Reconciliation" p:href="reportReconciliationView?methodToCall=get&amp;viewId=ReportReconciliationView">
                    <property name="componentSecurity.viewAuthz" value="true"/>
                </bean>
                <bean id="collectionsTab" parent="Uif-Link" p:linkText="Collections" p:href="collectionsView?methodToCall=get&amp;viewId=CollectionsView">
                    <property name="componentSecurity.viewAuthz" value="true"/>
                </bean>
                <bean id="batchTab" parent="Uif-Link" p:linkText="Batch" p:href="batchTransactionsView?methodToCall=get&amp;viewId=BatchTransactionsView">
                    <property name="componentSecurity.viewAuthz" value="true"/>
                </bean>
                <bean id="thirdPartyTab" parent="Uif-Link" p:linkText="Third Party &amp; Payment Plans" p:href="paymentPlanView?methodToCall=get&amp;viewId=PaymentPlanView&amp;pageId=CreatePaymentPlanPage">
                    <property name="componentSecurity.viewAuthz" value="true"/>
                </bean>
                <bean id="settingsTab" parent="Uif-Link" p:linkText="Settings" p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=CurrencyPage">
                    <property name="componentSecurity.viewAuthz" value="true"/>
                </bean>
            </list>
        </property>
    </bean>

    <bean name="KsaAccountNavigation" parent="Uif-KsaPageNavigation">
        <property name="items">
            <list>
                <bean parent="Uif-HeaderTwo" p:headerText="Accounts"/>
                <bean parent="Uif-Link" p:linkText="Advanced Search" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=CurrencyPage"/>
                <bean parent="Uif-Link" p:linkText="Quick View" p:target="_self"
                      p:href="quickView?methodToCall=get&amp;viewId=QuickView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Transactions - All" p:target="_self"
                      p:href="transactionView?methodToCall=get&amp;pageId=ViewTransactions&amp;viewId=TransactionView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Transactions - Roll-Up" p:target="_self"
                      p:href="transactionView?methodToCall=get&amp;pageId=RollUpTransactions&amp;viewId=TransactionView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Transactions - Running Balance" p:target="_self"
                      p:href="transactionView?methodToCall=get&amp;pageId=RunningBalanceTransactions&amp;viewId=TransactionView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Make a Payment" p:target="_self"
                      p:href="paymentView?methodToCall=create&amp;viewId=PaymentView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Add a Charge" p:target="_self"
                      p:href="chargeView?methodToCall=get&amp;viewId=ChargeView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Add a Deferment" p:target="_self"
                      p:href="defermentView?methodToCall=get&amp;viewId=DefermentView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Write-Off Account" p:target="_self"
                      p:href="writeOffView?methodToCall=get&amp;viewId=WriteOffView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Biographic Information" p:target="_self"
                      p:href="biographicView?methodToCall=get&amp;viewId=BiographicView&amp;pageId=BiographicPersonsPage&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Flags" p:target="_self"
                      p:href="transactionView?methodToCall=get&amp;pageId=ViewFlags&amp;viewId=TransactionView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Alerts" p:target="_self"
                      p:href="transactionView?methodToCall=get&amp;pageId=ViewAlerts&amp;viewId=TransactionView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Memos" p:target="_self"
                      p:href="memoView?methodToCall=get&amp;viewId=MemoView&amp;pageId=MemosPage&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Generate 1098T" p:target="_self"
                      p:href="generate1098T?methodToCall=display1098TForm&amp;viewId=Generate1098TView&amp;userId=@{account.id}"/>
                <bean parent="Uif-Link" p:linkText="Refund" p:target="_self"
                      p:href="accountRefund?methodToCall=displayInitialPage&amp;viewId=AccountRefundView&amp;userId=@{account.id}"/>
            </list>
        </property>
    </bean>

    <bean id="KsaAdministrationNavigation" parent="Uif-KsaPageNavigation">
        <property name="items">
            <list>
                <bean parent="Uif-HeaderTwo" p:headerText="Administration"/>
                <!--<bean parent="Uif-NavigationActionLink" p:navigateToPageId="AccountManagement" p:actionLabel="Account Management"/>-->
                <bean parent="Uif-Link" p:linkText="Account Management"
                      p:href="adminView?methodToCall=get&amp;viewId=AdminView&amp;pageId=AccountManagement"/>
                <bean parent="Uif-Link" p:linkText="Account Import"
                      p:href="accountImportView?methodToCall=get&amp;viewId=AccountImportView"/>
                <bean parent="Uif-Link" p:linkText="System Activity"
                      p:href="adminView?methodToCall=get&amp;viewId=AdminView&amp;pageId=SystemActivity"/>
                <bean parent="Uif-Link" p:linkText="Regulatory Tracking"
                      p:href="adminView?methodToCall=get&amp;viewId=AdminView&amp;pageId=RegulatoryTracking"/>
                <bean parent="Uif-Link" p:linkText="System Roles &amp; Users"
                      p:href="adminView?methodToCall=get&amp;viewId=AdminView&amp;pageId=SystemRolesUsers"/>
                <bean parent="Uif-Link" p:linkText="Refunds"
                      p:href="adminView?methodToCall=get&amp;viewId=AdminView&amp;pageId=Refunds"/>
                <bean parent="Uif-Link" p:linkText="Rule Management"
                      p:href="ruleSetsView?methodToCall=get&amp;viewId=RuleSetsView"/>
            </list>
        </property>
    </bean>

    <bean name="KsaBatchNavigation" parent="Uif-KsaPageNavigation">
        <property name="items">
            <list>
                <bean parent="Uif-HeaderTwo" p:headerText="Batch Transactions"/>
                <bean parent="Uif-Link" p:linkText="Upload a File"
                      p:href="batchTransactionsView?methodToCall=get&amp;viewId=BatchTransactionsView"/>
                <bean parent="Uif-Link" p:linkText="Refunds"
                      p:href="batchRefundView?methodToCall=get&amp;viewId=BatchRefundView"/>
                <bean parent="Uif-Link" p:linkText="Generate Aged Balance List"
                      p:href="batchTransactionsView?methodToCall=get&amp;viewId=BatchTransactionsView&amp;pageId=AgedBalanceView"/>
                <bean parent="Uif-Link" p:linkText="Age All Accounts"
                      p:href="batchTransactionsView?methodToCall=get&amp;viewId=BatchTransactionsView&amp;pageId=AgeTransactionsView"/>
            </list>
        </property>
    </bean>

    <bean name="KsaThirdPartyPaymentPlansNavigation" parent="Uif-KsaPageNavigation">
        <property name="items">
            <list>
                <bean parent="Uif-HeaderTwo" p:headerText="Third Party &amp; Payment Plans"/>
                <bean parent="Uif-Link" p:linkText="Create Payment Billing Plan" p:target="_self"
                      p:href="paymentPlanView?methodToCall=get&amp;viewId=PaymentPlanView&amp;pageId=CreatePaymentPlanPage"/>
                <bean parent="Uif-Link" p:linkText="Manage Payment Billing Plans" p:target="_self"
                      p:href=""/>
                <bean parent="Uif-Link" p:linkText="Create Third Party Payment Plan" p:target="_self"
                      p:href="paymentPlanView?methodToCall=get&amp;viewId=PaymentPlanView&amp;pageId=CreateThirdPartyPage"/>
                <bean parent="Uif-Link" p:linkText="Manage Third Party Payment Plans" p:target="_self"
                      p:href="paymentPlanView?methodToCall=get&amp;viewId=PaymentPlanView&amp;pageId=ManageThirdPartyPage"/>
            </list>
        </property>
    </bean>

    <bean id="Uif-KsaPageNavigation" parent="Uif-MenuNavigationGroup" abstract="true" scope="prototype">
        <property name="items">
            <list>
                <bean parent="Uif-HeaderTwo" p:headerText="Page Navigation"/>
            </list>
        </property>
    </bean>

    <bean id="Uif-KsaHeader" parent="Uif-HeaderBase" scope="prototype">
        <property name="template" value="/WEB-INF/ftl/header.ftl"/>
        <property name="upperGroup" ref="Uif-KsaViewNavigation"/>
    </bean>

    <bean id="Uif-KsaFormView" class="com.sigmasys.kuali.ksa.krad.uif.KsaFormView" parent="Uif-FormView"
          abstract="true">
        <property name="template" value="/WEB-INF/ftl/view.ftl"/>
        <property name="additionalCssFiles">
            <list>
                <value>css/ksa.css?forceReload</value>
            </list>
        </property>
        <property name="additionalScriptFiles">
            <list>
                <value>js/ksa.js</value>
            </list>
        </property>
        <property name="theme" ref="Uif-KsaTheme"/>
        <property name="breadcrumbs" ref="Uif-KsaBreadcrumbs"/>
        <property name="onLoadScript" value="window.onbeforeunload = null;"/>
        <property name="entryPageId" value="AccountSearchPage"/>
        <property name="applicationHeader">
            <bean parent="Uif-HeaderBase" p:id="ksa-banner">
                <property name="upperGroup">
                    <bean parent="Uif-HeaderUpperGroup" p:id="ksa-header-upper-group"
                          p:layoutManager.itemStyleClasses="boxLayoutHorizontalItem-tight">
                        <property name="items">
                            <list>
                                <bean parent="Uif-ImageField"
                                      p:source="@{getContext()}/images/kuali_student_accounts.png">
                                    <property name="cssClasses">
                                        <list merge="true">
                                            <value>ksa-logo</value>
                                        </list>
                                    </property>
                                </bean>

                                <bean parent="Uif-InputField" p:label="Account Lookup" p:propertyName="searchValue"
                                      p:labelPlacement="TOP"
                                      p:fieldLabel.renderColon="false">
                                    <property name="bindingInfo.bindToForm" value="true"/>
                                    <property name="control">
                                        <bean parent="Uif-TextControl" p:size="25"/>
                                    </property>
                                </bean>
                                <bean parent="Uif-SecondaryActionButton-Small" p:methodToCall="searchByType"
                                      p:actionLabel="Search">
                                    <property name="cssClasses">
                                        <list merge="true">
                                            <value>ksa-form-button</value>
                                        </list>
                                    </property>
                                </bean>
                            </list>
                        </property>
                    </bean>
                </property>
            </bean>
        </property>
        <property name="header.upperGroup" ref="Uif-KsaViewNavigation"/>
        <property name="navigation">
            <bean parent="Uif-KsaPageNavigation"/>
        </property>
        <property name="breadcrumbOptions.homewardPathBreadcrumbs">
            <list>
                <bean parent="Uif-BreadcrumbItem">
                    <property name="label" value="Home"/>
                    <property name="url.href" value="@{#ConfigProperties['application.url']}"/>
                </bean>
            </list>
        </property>

        <property name="items">
            <list>
                <ref bean="AccountSearchPage"/>
            </list>
        </property>
    </bean>

    <!-- Common KSA search pages go here -->
    <bean id="AccountSearchPage" parent="Uif-Page" p:title="Accounts" scope="prototype">
        <property name="items">
            <list>
                <bean parent="Uif-VerticalBoxSection"
                      p:layoutManager.orientation="VERTICAL"
                      p:title="Search for Accounts by Name">
                    <property name="disclosure.render" value="false"/>
                    <property name="items">
                        <list>
                            <bean parent="Uif-Disclosure-TableCollectionSection"
                                  p:layoutManager.numberOfColumns="5"
                                  p:disclosure.render="false"
                                  p:progressiveRenderViaAJAX="true"
                                  p:title="Matching Accounts"
                                  p:instructionalText="Select an account to view details"
                                  p:width="85%">
                                <property name="readOnly" value="true"/>
                                <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.model.Account"/>
                                <property name="propertyName" value="accounts"/>
                                <property name="layoutManager.sequencePropertyName" value="id"/>
                                <property name="layoutManager.richTable.render" value="false"/>
                                <property name="layoutManager.renderSequenceField" value="false"/>
                                <property name="layoutManager.applyDefaultCellWidths" value="false"/>
                                <property name="layoutManager.richTable.disableTableSort" value="false"/>
                                <property name="items">
                                    <list>
                                        <bean parent="Uif-InputField" p:label="ID"
                                              p:propertyName="id" p:width="10%">
                                            <property name="control">
                                                <bean parent="Uif-TextControl" p:size="15" p:maxLength="20"/>
                                            </property>
                                        </bean>
                                        <bean parent="Uif-InputField" p:label="Name"
                                              p:propertyName="compositeDefaultPersonName"
                                              p:width="30%">
                                            <property name="control">
                                                <bean parent="Uif-TextControl" p:size="50" p:maxLength="50"/>
                                            </property>
                                        </bean>
                                        <bean parent="Uif-InputField" p:label="Address"
                                              p:propertyName="compositeDefaultPostalAddress"
                                              p:width="50%">
                                            <property name="control">
                                                <bean parent="Uif-TextControl" p:size="120" p:maxLength="120"/>
                                            </property>
                                        </bean>
                                        <!-- Use this to display the combined account, bio, aging and alerts -->
                                        <bean parent="Uif-LinkField" p:linkText="Transactions" p:target="_self"
                                              p:align="center" p:width="10%"
                                              p:href="transactionView?methodToCall=get&amp;pageId=ViewTransactions&amp;viewId=TransactionView&amp;userId=@{#line.id}"/>
                                        <bean parent="Uif-LinkField" p:linkText="Quick View" p:target="_self"
                                              p:align="center" p:width="10%"
                                              p:href="quickView?methodToCall=get&amp;viewId=QuickView&amp;userId=@{#line.id}"/>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

</beans>